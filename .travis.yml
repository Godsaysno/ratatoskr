dist: bionic

addons:
  apt:
    packages:
      - libzmq3-dev

language: cpp

compiler: gcc

before_install:
        - sudo apt update
        - sudo apt -y install libpugixml-dev
        - sudo apt -y install libboost-all-dev

before_script:
        - mkdir systemc
        - wget https://accellera.org/images/downloads/standards/systemc/systemc-2.3.3.tar.gz
        - tar -xf systemc-2.3.3.tar.gz
        - cd systemc-2.3.3
        - mkdir objdir
        - cd objdir
        - ../configure --prefix=/usr/local/systemc-2.3.3
        - make -j
        - sudo mkdir /usr/local/systemc-2.3.3
        - sudo make install
        - sudo sed -i '/using std::gets;/d' /usr/local/systemc-2.3.3/include/systemc.h
        - cd ../..

script:
        - cd simulator
        - ./build.sh
        - cd ..
        - cd tests/urand
        - ./run.sh
        - cd ../..
        - cd ../tests/netrace
        - ./run.sh
